# ToolBridge API - Local Development Secrets
# Copy this file to .env and fill in your actual values from K8s

# JWT HS256 Secret for backend token signing (REQUIRED in production)
# Used for defense-in-depth even when upstream OIDC is configured
# Get it from: kubectl get secret toolbridge-secret -n toolbridge -o jsonpath='{.data.jwt-secret}' | base64 -d
# Generate: openssl rand -base64 32
JWT_HS256_SECRET=your-jwt-secret-from-k8s-here

# Tenant Header Secret for HMAC signing (MCP deployments)
# Get it from: kubectl get secret toolbridge-secret -n toolbridge -o jsonpath='{.data.tenant-header-secret}' | base64 -d
TENANT_HEADER_SECRET=your-tenant-header-secret-from-k8s-here

# Tenant ID for MCP proxy
TENANT_ID=staging-tenant-001

# Go API Base URL
GO_API_BASE_URL=https://toolbridgeapi.erauner.dev

# MCP Base URL (Fly.io or local)
MCP_BASE_URL=https://toolbridge-mcp-staging.fly.dev

# JWT/OIDC Configuration (optional - for RS256 token validation)
# Supports any OIDC provider: WorkOS AuthKit, Auth0, Okta, etc.
# If not set, API will only accept HS256 tokens (dev/testing mode)
JWT_ISSUER=https://svelte-monolith-27-staging.authkit.app
JWT_JWKS_URL=https://svelte-monolith-27-staging.authkit.app/oauth2/jwks
JWT_AUDIENCE=https://toolbridgeapi.erauner.dev

# MCP OAuth Audience (for MCP server integration)
#
# WorkOS AuthKit with Dynamic Client Registration (DCR):
#   Set to EMPTY to skip audience validation. With DCR, tokens have unpredictable
#   client IDs as audience (e.g., client_01KABXHNQ09QGWEX4APPYG2AH5), not the resource URL.
#   We validate issuer + signature instead. See: docs/workos-dcr-authentication.md
#   MCP_OAUTH_AUDIENCE=
#
# Static Client Registration (non-DCR):
#   Set to the MCP server resource URL. Must match the `resource` value from:
#   curl https://toolbridge-mcp-staging.fly.dev/.well-known/oauth-protected-resource/sse
#   MCP_OAUTH_AUDIENCE=https://toolbridge-mcp-staging.fly.dev/sse
#
# Default for WorkOS AuthKit DCR (recommended):
MCP_OAUTH_AUDIENCE=
